{% load static %}
<!DOCTYPE HTML>
<html lang="en">



<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Sample title - Ecommerce admin dashboard template</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">

    <link href="{% static 'admin/css/bootstrapf9e3.css' %}" rel="stylesheet" type="text/css" />

    <!-- custom style -->
    <link href="{% static 'admin/css/uif9e3.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'admin/css/responsivef9e3.css' %}" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>

    <!-- iconfont -->
    <link rel="stylesheet" href="{% static 'admin/fonts/material-icon/css/round.css' %}" />

</head>

<body>

    <b class="screen-overlay"></b>

    <aside class="navbar-aside" id="offcanvas_aside">
        <div class="aside-top">
            <a href="{% url 'adminhome' %}" class="brand-wrap">
                <img src="{% static 'admin/images/logo.svg' %}" height="46" class="logo" alt="Ecommerce dashboard template">
            </a>
            <div>
                <button class="btn btn-icon btn-aside-minimize"> <i class="text-muted material-icons md-menu_open"></i> </button>
            </div>
        </div>
        <!-- aside-top.// -->

        <nav>
            <ul class="menu-aside">
                <li class="menu-item active">
                    <a class="menu-link" href="{% url 'adminhome' %}"> <i class="icon material-icons md-home"></i>
                        <span class="text">Dashboard</span>
                    </a>
                </li>
                <li class="menu-item has-submenu">
                    <a class="menu-link" href="#"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Products managment</span>
                    </a>
                    <div class="submenu">
                        <a href="{% url 'productlist' %}">Product list</a>
                        <a href="{% url 'addproduct' %}">Add Product</a>
                    </div>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="{% url 'usermanagment' %}"> <i class="icon fa fa-user"></i>
                        <span class="text">User managment</span>
                    </a>
                </li>
                <li class="menu-item has-submenu">
                    <a class="menu-link" href="#"><i class="icon fas fa-clipboard-list"></i>  
		  <span class="text">Category managment</span> 
		</a>
                    <div class="submenu">
                        <a href="{% url 'categories' %}">Main categories</a>
                        <a href="{% url 'subcategories' %}">Sub categories</a>
                        <a href="{% url 'brandlist' %}">Brand</a>
                    </div>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="{% url 'ordermanagment' %}"> <i class="icon fa fa-user"></i>
                        <span class="text">Order managment</span>
                    </a>
                </li>
                <li class="menu-item ">
                    <a class="menu-link" href="{% url 'offer_management' %}"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Offer managment</span>
                    </a>
                 
                </li>
                <li class="menu-item ">
                    <a class="menu-link" href="{% url 'coupon_management' %}"> <i class="icon material-icons md-shopping_bag"></i>
                        <span class="text">Coupon managment</span>
                    </a>
                    
                </li>
                
                
                <li class="menu-item has-submenu">
                    <a class="menu-link" href="#"> <i class="icon fas fa-sign-out-alt"></i>
                        <span class="text">Sales Report</span>
                    </a>
                    <div class="submenu">
                        <a href="{% url 'report' %}">weekly Report</a>
                        <a href="{% url 'monthly_sales_report' %}">Monthly Report</a>
                    </div>
                </li>
                <li class="menu-item">
                    <a class="menu-link" href="{% url 'adminlogout' %}"> <i class="icon fas fa-sign-out-alt"></i>
                        <span class="text">Logout</span>
                    </a>
                </li>
            </ul>
            <hr>
            <!-- <ul class="menu-aside">
    <li class="menu-item has-submenu"> 
      <a class="menu-link" href="#"> <i class="icon material-icons md-settings"></i> 
        <span class="text">Settings</span> 
      </a>
      <div class="submenu">
        <a href="page-settings-1.html">Setting sample 1</a>
        <a href="page-settings-2.html">Setting sample 2</a>
      </div>
    </li>
    <li class="menu-item">
      <a class="menu-link" href="page-0-blank.html"> <i class="icon material-icons md-local_offer"></i> 
        <span class="text"> Starter page </span>
      </a> 
    </li>
  </ul> -->
            <br>
            <br>
        </nav>
    </aside>

    <main class="main-wrap">
        <header class="main-header navbar justify-content-end">
            <div class="col-nav">
                <button class="btn btn-icon btn-mobile me-auto" data-trigger="#offcanvas_aside"> <i class="md-28 material-icons md-menu"></i> </button>
                <ul class="nav">
                    <li class="nav-item">
                        <a class="nav-link btn-icon" onclick="darkmode(this)" title="Dark mode" href="#"> <i class="material-icons md-nights_stay"></i> </a>
                    </li>
                   
                </ul>
            </div>
        </header>
        {% block content %}
        
        <section class="content-main">
            <div class="content-header">
                <h2 class="content-title"> Dashboard </h2>
                <div>
                    <a href="{% url 'report' %}" class="btn btn-primary">Create report</a>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-primary-light"><i class="text-primary material-icons md-monetization_on"></i></span>
                            <div class="text">
                                <h6 class="mb-1">Total Sales</h6> <span>{{total_sale.total__sum}}</span>
                            </div>
                        </article>

                    </div>
                    <!-- card  end// -->
                </div>
                <!-- col end// -->
                <div class="col-lg-4">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-success-light"><i class="text-success material-icons md-local_shipping"></i></span>
                            <div class="text">
                                <h6 class="mb-1">Total Orders</h6> <span>{{total_orders}}</span>
                            </div>
                        </article>
                    </div>
                    <!-- card end// -->
                </div>
                <!-- col end// -->
                <div class="col-lg-4">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-warning-light"><i class="text-warning material-icons md-shopping_basket"></i></span>
                            <div class="text">
                                <h6 class="mb-1">Total Products</h6> <span>{{total_products}}</span>
                            </div>
                        </article>
                    </div>
                    <!--  end// -->
                </div>
                <!-- col end// -->
            </div>
            <!-- row end// -->


            <div class="row">
                <div class="col-xl-7 col-lg-12" >
                    <div class="card mb-4">
                        <article class="card-body">
                            <h5 class="card-title">Sale statistics</h5>

                            <canvas id="myChart"></canvas>

                            <script>
                                // === include 'setup' then 'config' above ===
                                var data = {
                                    labels: [{% for label in category %}'{{label.sub_category_name}}', {% endfor %}
                                    ],
                                    datasets: [{
                                        label: 'orders',
                                        backgroundColor: 'rgb(255, 99, 132)',
                                        borderColor: 'rgb(255, 99, 132)',
                                        data: [{% for label in quantity %} {{label}}, {% endfor %}],
                                    }]
                                };
                                var config = {
                                    type: 'line',
                                    data: data,
                                    options: {}
                                };
                                var myChart = new Chart(
                                    document.getElementById('myChart'),
                                    config
                                );
                            </script>
                        </article>
                        <!-- card-body end// -->
                    </div>
                    <!-- card end// -->
                </div>
                <!-- col end// -->
                <div class="col-xl-5 col-lg-12">
                    <div class="card mb-4">
                        <article class="card-body">

                            <h5 class="card-title">Stocks</h5>

                            <canvas id="myChart1"></canvas>

                            <script>
                                // === include 'setup' then 'config' above ===
                                var data = {
                                    labels: [{% for label in product_list %}'{{label.product_name}}', {% endfor %}
                                    ],
                                    datasets: [{
                                        label: 'Stocks',
                                        backgroundColor: [
                                            'rgba(255, 99, 132, 0.2)',
                                            'rgba(255, 159, 64, 0.2)',
                                            'rgba(255, 205, 86, 0.2)',
                                            'rgba(75, 192, 192, 0.2)',
                                            'rgba(54, 162, 235, 0.2)',
                                            'rgba(153, 102, 255, 0.2)',
                                            'rgba(201, 203, 207, 0.2)'
                                        ],
                                        borderColor: [
                                            'rgb(255, 99, 132)',
                                            'rgb(255, 159, 64)',
                                            'rgb(255, 205, 86)',
                                            'rgb(75, 192, 192)',
                                            'rgb(54, 162, 235)',
                                            'rgb(153, 102, 255)',
                                            'rgb(201, 203, 207)'
                                        ],
                                        data: [{% for label in product_list %} {{label.unit}}, {% endfor %}],
                                    }]
                                };
                                var config = {
                                    type: 'pie',
                                    data: data,
                                    options: {
                                        scales: {
                                            y: {
                                                beginAtZero: true
                                            }
                                        }
                                    }
                                };
                                var myChart = new Chart(
                                    document.getElementById('myChart1'),
                                    config
                                );
                            </script>

                        </article>
                        <!-- card-body end// -->
                    </div>
                    <!-- card end// -->
                </div>
                <!-- col end// -->
            </div>
            <!-- row end// -->


            <div class="card mb-4">
                <div class="card-body">
                    <h5 class="card-title">Latest orders</h5>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <tr>
                                <td>2323</td>
                                <td><b>Devon Lane</b></td>
                                <td>devon@example.com</td>
                                <td>$778.35</td>
                                <td><span class="badge rounded-pill alert-success">Delivered</span></td>
                                <td>07.05.2020</td>
                                <td class="text-end">
                                    <a href="#" class="btn btn-light">Detail</a>
                                    <div class="dropdown">
                                        <a href="#" data-bs-toggle="dropdown" class="btn btn-light"> <i class="material-icons md-more_horiz"></i> </a>
                                        <div class="dropdown-menu">
                                            <a class="dropdown-item" href="#">View detail</a>
                                            <a class="dropdown-item" href="#">Edit info</a>
                                            <a class="dropdown-item text-danger" href="#">Delete</a>
                                        </div>
                                    </div>
                                    <!-- dropdown //end -->
                                </td>
                            </tr>

                        </table>
                    </div>
                    <!-- table-responsive end// -->
                </div>
                <!-- card-body end// -->
            </div>
            <!-- card end// -->

        </section>
        <!-- content-main end// -->
        {% endblock %}
    </main>
    <script type="text/javascript">
        if (localStorage.getItem("darkmode")) {
            var body_el = document.body;
            body_el.className += 'dark';
        }
    </script>

    <script src="{% static 'admin/js/jquery-3.5.0.min.js' %}"></script>
    <script src="{% static 'admin/js/bootstrap.bundle.min.js' %}"></script>

    <!-- ChartJS files-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

    <!-- Custom JS -->
    <script src="{% static 'admin/js/scriptc619.js' %}" type="text/javascript"></script>

    <!-- ChartJS customize-->

    <script text="text/javascripts">
        function gettoken(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;

        }
        const csrftokens = gettoken('csrftoken');

        $('.dependent-drop').change(function() {
            var action = this.dataset.action
            var value = $(this).children("option:selected").val()
            var cat_val = $('#category_selection').children("option:selected").val()
            dropdown_selection(action, value, cat_val)

        })

        function dropdown_selection(action, value, cat_val) {

            var url = '/newadmin/dropdownview/'
            fetch(url, {
                    method: 'POST',
                    headers: {
                        'content-type': 'application/json',
                        'X-CSRFToken': csrftokens,
                    },
                    body: JSON.stringify({
                        'selection': value,
                        'action': action,
                        'category': cat_val
                    })
                })
                .then((response) => {
                    return response.json()
                })
                .then((data) => {
                    let html_data = '<option> </option>'

                    if (action == "category") {

                        data.forEach(function(subcategory) {
                            html_data += `<option value = "${subcategory.id}" > ${subcategory.sub_category_name} </option>`
                        });
                        $('#dependend-sub').html(html_data)
                    } else if (action == "subcategory") {
                        data.forEach(function(subcat) {

                            html_data += `<option value = "${subcat.id}"> ${subcat.brand_name} </option>`

                        });
                        $('#dependent-brand').html(html_data)
                    } else {

                        data.forEach(function(subcategory) {
                            html_data += `<option value = "${subcategory.id}"> ${subcategory.sub_category_name} </option>`
                        });

                        $('#dependend-subcategory').html(html_data)
                    }


                   
                })
        }
    </script>
    <script>
        function readURL(input, actions) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                console.log(actions)
                if (actions == "image1") {
                    reader.onload = function(e) {
                        $('#myimage1').attr('src', e.target.result);
                        $('#myimage1').removeAttr('hidden')
                    };
                } else if (actions == "image2") {
                    reader.onload = function(e) {
                        $('#myimage2').attr('src', e.target.result);
                        $('#myimage2').removeAttr('hidden')
                    };
                } else if (actions == "image3") {
                    reader.onload = function(e) {
                        $('#myimage3').attr('src', e.target.result);
                        $('#myimage3').removeAttr('hidden')
                    };
                } else if (actions == "image4") {
                    reader.onload = function(e) {
                        $('#myimage4').attr('src', e.target.result);
                        $('#myimage4').removeAttr('hidden')
                    };
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
    <script src="{% static 'js/ajax.js' %}"></script>
    <script>
        $(document).ready(function() {
            $("#myInput").on("keyup", function() {
                var value = $(this).val().toLowerCase();
                $("#myTable tr").filter(function() {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });
        });
    </script>
    <script>
        var url= '/newadmin/check_validity/'
             $( document ).ready( function(){
                console.log('hhhhhh')
                fetch(url, {
                method: 'POST',
                headers: {
                    'content-type': 'application/json',
                    'X-CSRFToken': csrftokens,
                },
                body: JSON.stringify('')
            })
            .then((response) => {
                return response.json()
            })
            .then((data) => {
                
            })
            })
        </script>
</body>



</html>

</html>

</html>

</html>