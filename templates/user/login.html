{% load static %}
<!doctype html>
<html class="no-js" lang="en">




<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Norda - Minimal eCommerce HTML Template</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'images/favicon.png' %}">

    <!-- All CSS is here
	============================================ -->

    <link rel="stylesheet" href="{% static 'css/vendor/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/vendor/signericafat.css' %}">
    <link rel="stylesheet" href="{% static 'css/vendor/cerebrisans.css' %}">
    <link rel="stylesheet" href="{% static 'css/vendor/simple-line-icons.css' %}">
    <link rel="stylesheet" href="{% static 'css/vendor/elegant.css' %}">
    <link rel="stylesheet" href="{% static 'css/vendor/linear-icon.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/nice-select.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/easyzoom.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/slick.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/animate.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'css/plugins/jquery-ui.css' %}">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

    <style type="text/css">
        figure.zoom {
            background-position: 50% 50%;
            position: relative;
            width: 500px;
            overflow: hidden;
            cursor: zoom-in;
            background-repeat: no-repeat;
            b
        }
        
        figure.zoom img:hover {
            opacity: 0;
        }
        
        figure.zoom img {
            transition: opacity 0.5s;
            display: block;
            width: 100%;
        }
    </style>
</head>

<body>

    <div class="main-wrapper">
        <header class="header-area">
            <div class="container">
                <div class="header-large-device">
                    <div class="header-top header-top-ptb-1 border-bottom-1">
                        <div class="row">
                            <div class="col-xl-4 col-lg-5">
                                <div class="header-offer-wrap">
                                    <h4>Welcome {% if user.is_authenticated %}<b style="color: red;">{{user}}</b> {% endif %}</h4>

                                </div>
                            </div>
                            <div class="col-xl-8 col-lg-7">
                                <div class="header-top-right">
                                    <div class="same-style-wrap">
                                        
                                        <div class="same-style same-style-border currency-wrap">
                                            <i class="icon-user"></i>
                                            <a class="currency-dropdown-active" href="#">My Account <i
                                                    class="icon-arrow-down"></i></a>
                                            <div class="currency-dropdown">
                                                <ul>
                                                    {% if user.is_authenticated %}
                                                    <li><a href="{% url 'profile' %}">Profile</a></li>
                                                    <li><a href="{% url 'orders' %}">My orders</a></li>
                                                    <!-- <li><a href="#">Compare</a></li> -->
                                                    <li><a href="{% url 'logout' %}">Logout</a></li>
                                                    {%else%}
                                                    <!-- <li><a href="#">Compare</a></li> -->
                                                    <li><a href="{% url 'login' %}">Login/<br>register</a></li>
                                                    {%endif%}

                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="header-bottom">
                        <div class="row align-items-center">
                            <div class="col-xl-2 col-lg-2">
                                <div class="logo">
                                    <a href="{%url 'home' %}"><img src="{% static 'images/logo/logo.png' %}" alt="logo"></a>
                                </div>
                            </div>
                            <div class="col-xl-8 col-lg-7">
                                <div class="main-menu main-menu-padding-1 main-menu-lh-1">
                                    <nav>
                                        <ul>
                                            <li><a href="{%url 'home' %}">HOME </a>
                                                
                                            </li>
                                            <li><a href="{% url 'product' %}">PRODUCTS </a>
                                                
                                            </li>
                                           
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                            <div class="col-xl-2 col-lg-3">
                                <div class="header-action header-action-flex header-action-mrg-right">
                                   
                                    <div class="same-style-2">
                                        <a href="{% url 'wishlist' %}"><i class="icon-heart"></i><span class="pro-count red">{{wish_count}}</span></a>
                                    </div>
                                    <div class="same-style-2">
                                        <a href="{% url 'cart' %}">
                                            <i class="icon-basket-loaded"></i><span class="pro-count red cart_count">{{count}}</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="header-small-device small-device-ptb-1">
                    <div class="row align-items-center">
                        <div class="col-5">
                            <div class="mobile-logo">
                                <a href="{%url 'home' %}">
                                    <img alt="" src="{% static 'images/logo/logo.png' %}">
                                </a>
                            </div>
                        </div>
                        <div class="col-7">
                            <div class="header-action header-action-flex">
                                
                                <div class="same-style-2">
                                    <a href="{% url 'wishlist' %}"><i class="icon-heart"></i><span class="pro-count red">{{wish_count}}</span></a>
                                </div>
                                <div class="same-style-2">
                                    <a href="{% url 'cart' %}">
                                        <i class="icon-basket"></i><span class="pro-count red cart_count">{{count}}</span>
                                    </a>
                                </div>
                                <div class="same-style-2 main-menu-icon">
                                    <a class="mobile-header-button-active" href="#"><i class="icon-menu"></i> </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- Mobile menu start -->
        <div class="mobile-header-active mobile-header-wrapper-style">
            <div class="clickalbe-sidebar-wrap">
                <a class="sidebar-close"><i class="icon_close"></i></a>
                <div class="mobile-header-content-area">
                    <div class="header-offer-wrap mobile-header-padding-border-4">
                    </div>
                    <div class="mobile-menu-wrap mobile-header-padding-border-2">
                        <!-- mobile menu start -->
                        <nav>
                            <ul class="mobile-menu">
                                <li class="menu-item-has-children"><a href="{% url 'home' %}">Home</a>
                                  
                                </li>
                                <li class="menu-item-has-children"><a href="{% url 'product' %}">Products</a>
                                   
                                </li>
                               
                            </ul>
                        </nav>
                        <!-- mobile menu end -->
                    </div>
                    <div class="mobile-header-info-wrap mobile-header-padding-border-3">
                       
                        <div class="single-mobile-header-info">

                            <a class="mobile-currency-active" href="#">My accounts <span><i
                                        class="icon-arrow-down"></i></span></a>
                            <div class="lang-curr-dropdown curr-dropdown-active">
                                <ul>
                                    {% if user.is_authenticated %}
                                    <li><a href="{% url 'profile' %}">Profile</a></li>
                                    <li><a href="{% url 'orders' %}">My orders</a></li>
                                    <!-- <li><a href="#">Compare</a></li> -->
                                    <li><a href="{% url 'logout' %}">Logout</a></li>
                                    {%else%}
                                    <!-- <li><a href="#">Compare</a></li> -->
                                    <li><a href="{% url 'login' %}">Login/<br>register</a></li>
                                    {%endif%}

                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="mobile-contact-info mobile-header-padding-border-4">
                        <ul>
                            <li><i class="icon-phone"></i> (+612) 2531 5600</li>
                            <li><i class="icon-envelope-open"></i> norda@domain.com</li>
                            <li><i class="icon-home"></i> PO Box 1622 Colins Street West Australia</li>
                        </ul>
                    </div>

                </div>
            </div>
        </div>
        <!-- mini cart start -->
        {% block content %}
        <div class="breadcrumb-area bg-gray">
            <div class="container">
                <div class="breadcrumb-content text-center">
                    <ul>
                        <li>
                            <a href="{%url 'home'%}">Home</a>
                        </li>
                        <li class="active">login</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="login-register-area pt-115 pb-120">
            <div class="container">
                <div class="row">
                    <div class="col-lg-7 col-md-12 ms-auto me-auto">
                        <div class="login-register-wrapper">
                            <div class="login-register-tab-list nav">
                                <a class="active" data-bs-toggle="tab" href="#">
                                    <h4> login </h4>
                                </a>
                               
                            </div>
                            <div class="tab-content">
                                <div id="lg1" class="tab-pane active">
                                    <div class="login-form-container">
                                        <div class="login-register-form">
                                            <form action="{% url 'login' %}" method="POST">
                                                {% csrf_token %}
                                                <input type="text" name="user-name" placeholder="Username" required>
                                                <input type="password" name="user-password" placeholder="Password" required>
                                                <div class="button-box">
                                                    <div class="login-toggle-btn">
                                                        <input type="checkbox">
                                                        <label>Remember me</label>
                                                        <a href="#">Forgot Password?</a>
                                                    </div>
                                                    <button type="submit">Login</button>
                                                </div>
                                                <div class="pt-5">
                                                    <span>New here? </span><a href="{%url 'register' %}"><b
                                                            style="color: red; padding-left: 5px;">create an
                                                            account</b></a>
                                                </div>
                                                <div class="pt-5">
                                                    <span>OTP Login </span><a href="{%url 'otp_login' %}"><b
                                                            style="color: red; padding-left: 5px;">login with otp</b></a>
                                                </div>
                                            </form>
                                        </div>

                                    </div>

                                </div>
                                {% if messages %} {% for message in messages %} {% if message.tags == "success" %}
                                <div class="alert alert-success">{{ message }}</div>
                                {% elif message.tags == "error" %}
                                <div class="alert alert-danger">{{ message }}</div>
                                {% endif %} {% endfor %} {% endif %}
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endblock %}
        <footer class="footer-area bg-gray pb-30">
            <div class="container">
                <div class="row" style="padding-top: 20px;">
                   

                    <div class="copyright text-center">
                        <p>Copyright © 2021 HasThemes | <a href="https://hasthemes.com/">Built with <span>Norda</span>
                                by HasThemes</a>.</p>
                    </div>
                </div>
            </div>
    </div>
    </footer>
    </div>
    <script text="text/javascripts">
        var user = '{{request.user}}'

        function gettoken(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        const csrftoken = gettoken('csrftoken');
    </script>
    <!-- All JS is here
============================================ -->

    <script src="{% static '/js/vendor/modernizr-3.11.7.min.js' %}"></script>
    <script src="{% static '/js/vendor/jquery-v3.6.0.min.js' %}"></script>
    <script src="{% static '/js/vendor/jquery-migrate-v3.3.2.min.js' %}"></script>
    <script src="{% static '/js/vendor/popper.min.js' %}"></script>
    <script src="{% static '/js/vendor/bootstrap.min.js' %}"></script>
    <script src="{% static '/js/plugins/slick.js' %}"></script>
    <script src="{% static '/js/plugins/jquery.syotimer.min.js' %}"></script>
    <script src="{% static '/js/plugins/jquery.instagramfeed.min.js' %}"></script>
    <script src="{% static '/js/plugins/jquery.nice-select.min.js' %}"></script>
    <script src="{% static '/js/plugins/wow.js' %}"></script>
    <script src="{% static '/js/plugins/jquery-ui-touch-punch.js' %}"></script>
    <script src="{% static '/js/plugins/jquery-ui.js' %}"></script>
    <script src="{% static '/js/plugins/magnific-popup.js' %}"></script>
    <script src="{% static '/js/plugins/sticky-sidebar.js' %}"></script>
    <script src="{% static '/js/plugins/easyzoom.js' %}"></script>
    <script src="{% static '/js/plugins/scrollup.js' %}"></script>
    <script src="{% static '/js/plugins/ajax-mail.js' %}"></script>
    <!-- <script src="{% static '/js/plugins/ajax-mail.js' %}"></script> -->
    <!-- Main JS -->
    <script src="{% static 'js/main.js' %}"></script>
    <script src="{% static 'js/ajax.js' %}"></script>
    <script src="{% static 'js/address_validation.js' %}"></script>
<script>
    
    function checkaddress(){
        var addres=$('input[name="address"]:checked').val();
        if (addres){
            return true
        }
        else{
            return false;
        }
    }
</script>
    <script>
        var url = '/newadmin/check_validity/'
        $(document).ready(function() {

            fetch(url, {
                    method: 'POST',
                    headers: {
                        'content-type': 'application/json',
                        'X-CSRFToken': csrftoken,
                    },
                    body: JSON.stringify('')
                })
                .then((response) => {
                    return response.json()
                })
                .then((data) => {

                })
        })
    </script>
    <script>
        $('.payment_option').click(function () {
            paymentoption()
        })
        $('.address_option').click(function () {
            paymentoption()
        })
    </script>
    <script>
        function paymentoption() {
            var payment = $('input[name="payment_method"]:checked').val();
            var  checker=checkaddress()
            if (checker){
                $('#addmsg').html("")
            if (payment == 'Razorpay') {
                $('#rzp-button1').removeAttr('hidden')
                $('#COD_Button').attr('hidden', true)
                $('#paypal-button-container').attr('hidden', true)
            } else if (payment == 'COD') {
                $('#COD_Button').removeAttr('hidden')
                $('#paypal-button-container').attr('hidden', true)
                $('#rzp-button1').attr('hidden', true)
            } else {
                $('#paypal-button-container').removeAttr('hidden')
                $('#rzp-button1').attr('hidden', true)
                $('#COD_Button').attr('hidden', true)
            }
            }
            else{
                $('#addmsg').html("pls add or select address")
            }
        }
    </script>
    <script>
        function zoom(e) {

            var zoomer = e.currentTarget;
            e.offsetX ? offsetX = e.offsetX : offsetX = e.touches[0].pageX
            e.offsetY ? offsetY = e.offsetY : offsetX = e.touches[0].pageX
            x = offsetX / zoomer.offsetWidth * 200
            y = offsetY / zoomer.offsetHeight * 200
            zoomer.style.backgroundPosition = x + '% ' + y + '%';
        }
    </script>
    <script src="https://www.paypal.com/sdk/js?client-id=AT5F6ISnwzVdkjTj1K5NzmvRVpbXn8SYtbRHeehLViiMYUss-qIoE7CHk1PfIRqFA97aTVBoYYBYOvfG&currency=USD"></script>
    <script>
        var amount = {{total}}
        paypal.Buttons({

            style: {
                color: 'blue',
                shape: 'rect',
                label: 'pay',
                height: 40,
            },
            // Set up the transaction
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: amount
                        }
                    }]
                });
            },

            // Finalize the transaction
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(orderData) {
                    // Successful capture! For demo purposes:
                    console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
                    var transaction = orderData.purchase_units[0].payments.captures[0];
                    alert('Transaction ' + transaction.status + ': ' + transaction.id + '\n\nSee console for all available details');
                    alert(transaction.status)
                    if (transaction.status == 'COMPLETED') {
                        $("#myForm").submit();
                    } else {
                        alert('Transaction ' + transaction.status)
                    }


                    // Replace the above to show a success message within this page, e.g.
                    // const element = document.getElementById('paypal-button-container');
                    // element.innerHTML = '';
                    // element.innerHTML = '<h3>Thank you for your payment!</h3>';
                    // Or go to another URL:  actions.redirect('thank_you.html');
                });
            }


        }).render('#paypal-button-container');
    </script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>
        var payment_order_id
        var payment_amount
        document.getElementById('rzp-button1').onclick = function(e) {
            e.preventDefault();

            url = '/razorpayment/{{product}}'
            fetch(url, {
                    method: 'POST',
                    headers: {
                        'content-type': 'application/json',
                        'X-CSRFToken': csrftoken,
                    },
                })
                .then((response) => {
                    return response.json()
                })
                .then((data) => {

                    payment_amount = data['amount']

                    payment_order_id = data['id']

                    razorpayment_verification(payment_order_id, payment_amount)
                })
        }

        function razorpayment_verification(userid, payment_amount) {
            var options = {
                "key": "rzp_test_g8LOYD78mSH0b6", // Enter the Key ID generated from the Dashboard
                "amount": payment_amount, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
                "currency": "INR",
                "name": "Acme Corp",
                "description": "Test Transaction",
                "image": "https://example.com/your_logo",
                "order_id": userid, //This is a sample Order ID. Pass the `id` obtained in the response of Step 2
                "handler": function(response) {
                    $("#myForm").submit();
                },
                "prefill": {
                    "name": "Gaurav Kumar",
                    "email": "gaurav.kumar@example.com",
                    "contact": "9999999999"
                },
                "notes": {
                    "address": "Razorpay Corporate Office"
                },
                "theme": {
                    "color": "#3399cc"
                }
            };
            var rzp1 = new Razorpay(options);
            rzp1.on('payment.failed', function(response) {
                alert(response.error.code);
                alert(response.error.description);
                alert(response.error.source);
                alert(response.error.step);
                alert(response.error.reason);
                alert(response.error.metadata.order_id);
                alert(response.error.metadata.payment_id);
            });
            rzp1.open();

        }
    </script>
</body>

</html>